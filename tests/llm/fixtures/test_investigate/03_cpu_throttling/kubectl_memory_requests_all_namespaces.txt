{"toolset_name":"kubernetes/core","tool_name":"kubectl_memory_requests_all_namespaces","match_params":{}}
{"schema_version": "robusta:v1.0.0", "status": "success", "error": null, "return_code": 0, "data": null, "url": null, "invocation": "kubectl get pods --all-namespaces -o custom-columns=\"NAMESPACE:.metadata.namespace,NAME:.metadata.name,MEMORY_REQUEST:.spec.containers[*].resources.requests.memory\" --no-headers | \\\nawk '\n  function convert_to_mib(value) {\n    if (value ~ /^[0-9]+e[0-9]+$/) return (value + 0) / (1024 * 1024); # Scientific notation\n    if (value ~ /m$/) return (value + 0) / (1024^2 * 1000);           # Millibytes (m)\n    if (value ~ /Ei$/) return (value + 0) * 1024^6 / (1024^2);        # Binary units\n    if (value ~ /Pi$/) return (value + 0) * 1024^5 / (1024^2);\n    if (value ~ /Ti$/) return (value + 0) * 1024^4 / (1024^2);\n    if (value ~ /Gi$/) return (value + 0) * 1024^3 / (1024^2);\n    if (value ~ /Mi$/) return (value + 0);\n    if (value ~ /Ki$/) return (value + 0) / 1024;\n    if (value ~ /E$/) return (value + 0) * 1000^6 / (1024^2);         # Decimal units\n    if (value ~ /P$/) return (value + 0) * 1000^5 / (1024^2);\n    if (value ~ /T$/) return (value + 0) * 1000^4 / (1024^2);\n    if (value ~ /G$/) return (value + 0) * 1000^3 / (1024^2);\n    if (value ~ /M$/) return (value + 0) * 1000^2 / (1024^2);\n    if (value ~ /k$/) return (value + 0) * 1000 / (1024^2);\n    return (value + 0) / (1024 * 1024);                               # Default: bytes\n  }\n  function sum_memory(requests) {\n    gsub(/^[ \\t]+|[ \\t]+$/, \"\", requests);\n    if (requests == \"\" || requests == \"<none>\") return 0;\n    split(requests, arr, \",\");\n    total = 0;\n    for (i in arr) {\n      if (arr[i] != \"<none>\") total += convert_to_mib(arr[i]);\n    }\n    return total;\n  }\n  {\n    namespace = $1;\n    name = $2;\n    requests = $3;\n    for (i=4; i<=NF; i++) {\n      requests = requests \" \" $i;\n    }\n    print namespace, name, sum_memory(requests) \" Mi\";\n  }' | sort -k3 -nr", "params": {}}
loki loki-chunks-cache-0 9830 Mi
default user-profile-resources-659d4dd659-9ddzf 5120 Mi
default robusta-holmes-664d749595-8kn8s 2048 Mi
default prometheus-robusta-kube-prometheus-st-prometheus-0 2048 Mi
loki loki-results-cache-0 1229 Mi
default robusta-runner-89d8c4845-vprhv 1024 Mi
mimir-test mimir-store-gateway-zone-c-0 512 Mi
mimir-test mimir-store-gateway-zone-b-0 512 Mi
mimir-test mimir-store-gateway-zone-a-0 512 Mi
mimir-test mimir-ingester-zone-c-0 512 Mi
mimir-test mimir-ingester-zone-b-0 512 Mi
mimir-test mimir-ingester-zone-a-0 512 Mi
mimir-test mimir-distributor-d4587dcc6-p97tr 512 Mi
mimir-test mimir-compactor-0 512 Mi
default robusta-forwarder-5c5fdbbf57-mrccs 512 Mi
sock-shop shipping-c4d77b86d-z8jsh 300 Mi
sock-shop queue-master-566bfb8644-v2n4f 300 Mi
sock-shop orders-697cb4957d-gf5j4 300 Mi
sock-shop front-end-6bc5876d74-4lbfd 300 Mi
rabbitmq rabbitmq-1 256 Mi
rabbitmq rabbitmq-0 256 Mi
default robusta-kube-state-metrics-8667fd9775-8jn28 256 Mi
sock-shop carts-f54496f6d-4bcjt 200 Mi
logging fluentd-49k7t 200 Mi
elastic-system elastic-operator-0 150 Mi
mimir-test mimir-ruler-7766959857-68t2h 128 Mi
mimir-test mimir-query-scheduler-86895f7855-xzzvc 128 Mi
mimir-test mimir-query-scheduler-86895f7855-7zlsn 128 Mi
mimir-test mimir-query-frontend-79c4bc4db9-mn66z 128 Mi
mimir-test mimir-querier-6c7f8fc49-kz56p 128 Mi
mimir-test mimir-querier-6c7f8fc49-4kwjv 128 Mi
mimir-test mimir-overrides-exporter-688687b4d9-5ndc6 128 Mi
mimir-test mimir-minio-5c8b75c988-9m6b9 128 Mi
mimir-test mimir-make-minio-buckets-5.4.0-tlddc 128 Mi
loki loki-minio-0 128 Mi
default alertmanager-robusta-kube-prometheus-st-alertmanager-0 128 Mi
sock-shop user-574f64957c-xxwps 100 Mi
sock-shop payment-84bbbfd97f-82vmg 100 Mi
sock-shop catalogue-f7687cb4-bjxf2 100 Mi
mimir-test mimir-rollout-operator-58975bf7db-cvkk5 100 Mi
kube-system etcd-kind-double-node-control-plane 100 Mi
kube-system coredns-749ff9d875-fj2lg 70 Mi
kube-system coredns-749ff9d875-6656k 70 Mi
default frontend-service 64 Mi
kube-system kindnet-cb9fq 50 Mi
kube-system kindnet-7fxrw 50 Mi
default robusta-prometheus-node-exporter-7lh5v 50 Mi
default robusta-prometheus-node-exporter-2cxmv 50 Mi
mimir-test mimir-alertmanager-0 32 Mi
test-ns nginx 0 Mi
test-ns client 0 Mi
sock-shop user-db-7f98f68489-bfpz5 0 Mi
sock-shop session-db-59cc4b855f-p66ck 0 Mi
sock-shop rabbitmq-556cb847-qqtjf 0 Mi
sock-shop orders-db-658fc79675-ncmkl 0 Mi
sock-shop catalogue-db-c948fd796-r46nj 0 Mi
sock-shop carts-db-676c6b5865-rp4pg 0 Mi
mimir-test mimir-nginx-655557f6bf-nxqg7 0 Mi
loki promtail-vxbjm 0 Mi
loki promtail-b2j7l 0 Mi
loki loki-gateway-84c9b5cf6-gbs72 0 Mi
loki loki-canary-22trk 0 Mi
loki loki-0 0 Mi
local-path-storage local-path-provisioner-57c5987fd4-lm88h 0 Mi
kube-system kube-scheduler-kind-double-node-control-plane 0 Mi
kube-system kube-proxy-lvxb2 0 Mi
kube-system kube-proxy-k9q2z 0 Mi
kube-system kube-controller-manager-kind-double-node-control-plane 0 Mi
kube-system kube-apiserver-kind-double-node-control-plane 0 Mi
gadget gadget-k6lkc 0 Mi
gadget gadget-4tfnq 0 Mi
default user-profile-import 0 Mi
default robusta-kube-prometheus-st-operator-6885c8f675-xqrlh 0 Mi
default robusta-grafana-8588b8fb85-rg4z5 0 Mi
default product-data-scraper-srxlw 0 Mi
default product-data-scraper-qdkd7 0 Mi
default product-data-scraper-fsk98 0 Mi
default product-data-scraper-7z9gm 0 Mi
default product-data-scraper-2s4j2 0 Mi
default payment-processing-worker-747ccfb9db-4wrhh 0 Mi
default network-connector 0 Mi
default my-http-app-deployment-75cdcff8b4-kmj67 0 Mi
default my-http-app-2-deployment-688958b7c7-svgcv 0 Mi
default meme-deployment-74db7bc95c-pzcxn 0 Mi
default meme-deployment-74db7bc95c-m68w2 0 Mi
default logging-agent 0 Mi
default java-api-checker-s5x6x 0 Mi
default java-api-checker-cwb76 0 Mi
default get-data-24bnd 0 Mi
default dnsutils-resolvconf 0 Mi
default db-certs-authenticator-757f89d977-795x7 0 Mi
default customer-relations-webapp-7c67c65579-m94rz 0 Mi
default customer-relations-webapp-7c67c65579-lqf4r 0 Mi
default customer-relations-webapp-7c67c65579-hr4wn 0 Mi
default customer-orders-6f5cbdf85-4wq74 0 Mi
default curl-deployment-6c67b4656-hlbw8 0 Mi
