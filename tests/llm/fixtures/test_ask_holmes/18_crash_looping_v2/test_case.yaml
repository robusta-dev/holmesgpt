user_prompt: "What is the issue with db-certs-authenticator?"
expected_output:
  - The `db-certs-authenticator` pod experienced an expired SSL certificate.
before_test: |
  kubectl apply -f manifest.yaml
  timeout=60
  elapsed=0
  while [ $elapsed -lt $timeout ]; do
    if kubectl logs -l app=flask -n app-18 2>/dev/null | grep -q "ERROR - SSL certificate expired"; then
      echo "SSL certificate error detected"
      break
    fi
    sleep 2
    elapsed=$((elapsed + 2))
  done
  if [ $elapsed -ge $timeout ]; then
    echo "Timeout waiting for SSL certificate error"
    exit 1
  fi
after_test: |
  kubectl delete namespace app-18
tags:
  - easy
  - kubernetes
