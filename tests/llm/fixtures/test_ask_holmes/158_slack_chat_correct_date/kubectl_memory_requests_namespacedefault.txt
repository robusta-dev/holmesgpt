{"toolset_name":"kubernetes/core","tool_name":"kubectl_memory_requests_namespace","match_params":{"namespace":"default"}}
{"schema_version": "robusta:v1.0.0", "status": "success", "error": null, "return_code": 0, "url": null, "invocation": "kubectl get pods -n default -o custom-columns=\"NAMESPACE:.metadata.namespace,NAME:.metadata.name,MEMORY_REQUEST:.spec.containers[*].resources.requests.memory\" --no-headers | \\\nawk '\n  function convert_to_mib(value) {\n    if (value ~ /^[0-9]+e[0-9]+$/) return (value + 0) / (1024 * 1024); # Scientific notation\n    if (value ~ /m$/) return (value + 0) / (1024^2 * 1000);           # Millibytes (m)\n    if (value ~ /Ei$/) return (value + 0) * 1024^6 / (1024^2);        # Binary units\n    if (value ~ /Pi$/) return (value + 0) * 1024^5 / (1024^2);\n    if (value ~ /Ti$/) return (value + 0) * 1024^4 / (1024^2);\n    if (value ~ /Gi$/) return (value + 0) * 1024^3 / (1024^2);\n    if (value ~ /Mi$/) return (value + 0);\n    if (value ~ /Ki$/) return (value + 0) / 1024;\n    if (value ~ /E$/) return (value + 0) * 1000^6 / (1024^2);         # Decimal units\n    if (value ~ /P$/) return (value + 0) * 1000^5 / (1024^2);\n    if (value ~ /T$/) return (value + 0) * 1000^4 / (1024^2);\n    if (value ~ /G$/) return (value + 0) * 1000^3 / (1024^2);\n    if (value ~ /M$/) return (value + 0) * 1000^2 / (1024^2);\n    if (value ~ /k$/) return (value + 0) * 1000 / (1024^2);\n    return (value + 0) / (1024 * 1024);                               # Default: bytes\n  }\n  function sum_memory(requests) {\n    gsub(/^[ \\t]+|[ \\t]+$/, \"\", requests);\n    if (requests == \"\" || requests == \"<none>\") return 0;\n    split(requests, arr, \",\");\n    total = 0;\n    for (i in arr) {\n      if (arr[i] != \"<none>\") total += convert_to_mib(arr[i]);\n    }\n    return total;\n  }\n  {\n    namespace = $1;\n    name = $2;\n    requests = $3;\n    for (i=4; i<=NF; i++) {\n      requests = requests \" \" $i;\n    }\n    print namespace, name, sum_memory(requests) \" Mi\";\n  }' | sort -k3 -nr", "params": {"namespace": "default"}, "icon_url": null}
default process-data-deployment-585b5b64f-m5v2t 128 Mi
default nginx-deployment-6d876d76b4-wq4mg 100 Mi
default nginx-deployment-6d876d76b4-v6t7n 100 Mi
default analytics-exporter-598c8b7d5-b6lr8 100 Mi
default frontend-service 64 Mi
default crashpod-9688789bc-zgl2p 0 Mi
