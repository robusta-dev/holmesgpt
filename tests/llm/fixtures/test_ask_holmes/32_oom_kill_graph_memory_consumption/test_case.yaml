user_prompt: "Show me the memory usage over time for the `analytics-exporter-slow` deployment. Does it indicate a memory leak?"
expected_output:
  - 'The answer should include something similar to << { tool_name: "execute_prometheus_range_query", random_key: "XXX" } >>.'
  - "Yes, the memory profile indicates a memory leak"
# These are slow going. It takes an hour to get one pod killed. This is to make sure the mem leak is slow enough to look like a mem leak for the LLM to see it as such.
# Running with RUN_LIVE will potentially fail the test which is expected. Run the deployment for a couple of hours before running this test live.
before_test: |
  kubectl apply -f ./slow_oom_deployment.yaml
  sleep 300
after_test: |
  kubectl delete -f ./slow_oom_deployment.yaml
evaluation:
  correctness: 1
