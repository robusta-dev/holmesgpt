# One-time HealthCheck resources for immediate execution
# These checks run immediately when created and show results in their status
---
apiVersion: holmes.robusta.dev/v1alpha1
kind: HealthCheck
metadata:
  name: quick-nginx-check
  namespace: test-app
spec:
  query: "Are all pods in deployment 'nginx-test' in namespace 'test-app' healthy and running?"
  timeout: 30
  mode: monitor
  model: gpt-4.1
---
apiVersion: holmes.robusta.dev/v1alpha1
kind: HealthCheck
metadata:
  name: quick-broken-app-check
  namespace: test-app
spec:
  query: "Are all pods in deployment 'broken-app' in namespace 'test-app' running without crashes?"
  timeout: 30
  mode: monitor
---
apiVersion: holmes.robusta.dev/v1alpha1
kind: HealthCheck
metadata:
  name: quick-memory-check
  namespace: test-app
spec:
  query: "Are all pods in namespace 'test-app' using less than 80% of their memory limits?"
  timeout: 45
  mode: monitor
---
apiVersion: holmes.robusta.dev/v1alpha1
kind: HealthCheck
metadata:
  name: quick-node-check
  namespace: test-app
spec:
  query: "Are all nodes in the cluster in Ready state?"
  timeout: 20
  mode: monitor
---
# Example with alert mode
apiVersion: holmes.robusta.dev/v1alpha1
kind: HealthCheck
metadata:
  name: quick-critical-check
  namespace: test-app
spec:
  query: "Is the database connection pool healthy with less than 80% connections used?"
  timeout: 30
  mode: alert  # This would send alerts if destinations are configured
  destinations:
    - type: slack
      config:
        channel: "#alerts"
